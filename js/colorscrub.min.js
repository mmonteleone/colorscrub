jQuery(function(a){a.colorScrubber({rawSource:a.query.q})}); (function(a){a.colorScrubber=function(i){var d=a.extend({},a.colorScrubber.defaults,i||{}),c=a(d.scrubButton),b=a(d.sourceInput),h=a(d.colorList),e=a(d.message),l=a(d.scrubbingIndicator),m=a(d.permaLink);a(document).bind("scrubbing",function(){h.clearColors();c.hide();l.css({display:"block"});e.text("");m.hide()}).bind("scrubbed",function(j,k){c.show();l.hide();if(k){h.renderColors(k.colors);k.colors.length===0?e.text("The source doesn't seem to contain any color information."):e.text("I found {n} color{s} in the source.".replace(/\{n\}/, k.colors.length).replace(/\{s\}/,k.colors.length>1?"s":""));if(k.url)m.attr("href",window.location.pathname+"?q="+encodeURIComponent(k.url));else{j=a.map(k.colors,function(p){return"#"+p.hexString}).join(" ");m.attr("href",window.location.pathname+"?q="+encodeURIComponent(j))}m.show()}}).bind("invalidUrl",function(){c.show();l.hide();e.text("Woops, I can't scrub that URL!");m.hide()}).bind("nosource",function(){c.show();l.hide();e.text("Woops, you didn't provide any source to scrub!");m.hide()}); var n=function(j){if(d.rurl.test(j)){a(document).trigger("scrubbing");a.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22"+encodeURIComponent(j)+"%22&format=xml'&callback=?",function(k){k.results[0]?a(document).trigger("scrubbed",{colors:a.parseColors(k.results[0]),url:j}):a(document).trigger("invalidUrl")})}else{a(document).trigger("scrubbing");j===""||j===b.attr("data-defaultvalue")?a(document).trigger("scrubbed").trigger("nosource"):a(document).trigger("scrubbing").trigger("scrubbed", {colors:a.parseColors(j)})}};a(c).bind("click",function(){n(a.trim(a(b).val()));return false});b.defaultText().flextarea();if(d.rawSource&&d.rawSource.length>0){b.trigger("customText").val(d.rawSource);n(d.rawSource)}};a.extend(a.colorScrubber,{defaults:{rurl:/^(file|https?):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/i,scrubButton:"#scrub",sourceInput:"#source",scrubbingIndicator:"#scrubbing",message:"#message",colorList:"ul#colors",permaLink:"#permalink",rawSource:""}})})(jQuery); (function(a){var i={stringToHex:function(b){if(b.length===3){for(var h="",e=0;e<3;e++){h+=b.charAt(e);h+=b.charAt(e)}b=h}return parseInt(b,16)},hexToString:function(b){for(b=b.toString(16);b.length<6;)b="0"+b;return b},hexToRgb:function(b){b=i.hexToString(b);return{r:parseInt(b.substring(0,2),16),g:parseInt(b.substring(2,4),16),b:parseInt(b.substring(4,6),16)}}},d=function(b){b=typeof b==="string"?i.stringToHex(b):b;a.extend(this,{hex:b,hexString:i.hexToString(b)});a.extend(this,i.hexToRgb(b))},c= function(b){var h={},e=[];a.each(c.scrapers,function(l,m){l=b.match(new RegExp(l,"igm"));l!==null&&a.each(l,function(n,j){n=m(j);h[n.hexString]=n})});a.each(h,function(l,m){e.push(m)});return e};a.extend(c,{scrapers:{"#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})":function(b){b=b.replace(/^#+/,"");return new d(b)},"0x[0-9a-fA-F]{6}":function(b){b=b.replace(/^0x+/,"");return new d(b)},"0x0(0|1|2)[0-9a-fA-F]{6}":function(b){b=b.replace(/^0x0(0|1|2)/,"");return new d(b)}}});a.parseColors=c})(jQuery,window); (function(a){a.fn.extend({renderColors:function(i,d){var c=this;d=a.extend({},a.fn.renderColors.defaults,d||{});var b=a(d.template);this.clearColors();a.each(i,function(h,e){b.clone().first("li").css({backgroundColor:"#"+e.hexString}).end().find("input.h").val(e.hexString).end().find("input.r").val(e.r).end().find("input.g").val(e.g).end().find("input.b").val(e.b).end().appendTo(c)});this.animate({opacity:1},{duration:300});return c},clearColors:function(){return this.empty().css({opacity:0})}}); a.extend(a.fn.renderColors,{defaults:{template:'<li class="color"><div><label>#</label><input type="text" class="h" value="" /><label>r</label><input type="text" class="r" value="" /><label>g</label><input type="text" class="g" value="" /><label>b</label><input type="text" class="b" value="" /></div></li>',defaultContainer:"ul#colors"}});a(function(){a(a.fn.renderColors.defaults.defaultContainer).delegate("input","mouseenter",function(){a(this).fadeTo(100,1).select()}).delegate("input","mouseleave", function(){a(this).fadeTo(200,0.3)}).delegate("li","mouseenter",function(){a(this).find("label").fadeTo(100,1).end().find("input").fadeTo(100,0.5)}).delegate("li","mouseleave",function(){a(this).find("label").fadeTo(200,0.3).end().find("input").fadeTo(200,0.3)})})})(jQuery); (function(a){var i=Number(a.fn.jquery.split(".").slice(0,2).join("."))>=1.4;a.fn.extend({flextarea:function(d){var c=a.extend({},a.fn.flextarea.defaults,d||{}),b=this,h,e=null,l=c.live?"live":"bind",m=function(g){var f={};a.each(c.styles,function(){var o=String(this);f[o]=g.css(o)});return f},n=function(g){h=h||a('<div class="flextarea-measurediv-container"></div>').css({position:"absolute",left:"-50000px",top:"-50000px"}).appendTo(a("body"));return a("<div></div>").css(a.extend({},m(g),{display:"none", width:g.css("width")})).appendTo(h)},j=function(g,f){for(var o="",q=1;q<f;q++)o+="<br />&nbsp;";g.html(o);return g.height()},k=function(g){if(g.data("_flextarea_context")===undefined||g.data("_flextarea_context")===null){var f=a.extend({},c);if(c.shareMeasure){e=e||n(g,c.styles);f.measureDiv=e}else f.measureDiv=n(g,c.styles);f.minRows=g.attr("data-minrows")||f.minRows;f.minHeight=g.attr("data-minheight")||f.minHeight;f.maxRows=g.attr("data-maxrows")||f.maxRows;f.maxHeight=g.attr("data-maxheight")|| f.maxHeight;f.minHeight=f.minRows!==null?j(f.measureDiv,f.minRows):f.minHeight;f.maxHeight=f.maxRows!==null?j(f.measureDiv,f.maxRows):f.maxHeight;g.data("_flextarea_context",f)}};if(!i&&c.live)throw"Use of the live option requires jQuery 1.4 or greater";var p=function(g){g=a(g.target);k(g);g.flextareaResize()};a.each("keyup change maxlength".split(" "),function(){b[l](String(this),p)});b[l]("paste",function(g){setTimeout(function(){p(g)},1)});a.fn.confine!==undefined&&b.confine({maxlength:c.maxLength}); return b.each(function(){k(a(this))}).flextareaResize()},flextareaResize:function(){return this.each(function(){var d=a(this),c=d.val(),b=d.data("_flextarea_context");if(b!==undefined){b.measureDiv.html(c.replace(/\n/g,"<br />").replace(/\s\s/g," &nbsp;")+b.padWord);c={overflow:"hidden"};var h=d.height(),e=b.measureDiv.height();if(e<b.minHeight){c.overflow="hidden";e=b.minHeight}else if(e>=b.maxHeight){c.overflow="auto";e=b.maxHeight}if(e!=h){c.height=e+"px";d.css(c);d.trigger("resize");if(e>h)d.trigger("grow"); else e<h&&d.trigger("shrink")}}})}});a.flextarea=function(d){a(a.fn.flextarea.defaults.selector).flextarea(d)};a.extend(a.fn.flextarea,{version:"0.9.0",defaults:{styles:["border-top-width","border-top-style","border-bottom-width","border-bottom-style","border-right-width","border-right-width-value","border-right-style","border-right-style-value","border-left-width","border-left-width-value","border-left-style","border-left-style-value","font-family","font-size","font-size-adjust","font-stretch","font-style", "font-variant","font-weight","padding-bottom","padding-left","padding-right","padding-top","letter-spacing","line-height","text-align","text-indent","word-spacing"],minHeight:0,maxHeight:999999,minRows:null,maxRows:null,maxLength:null,shareMeasure:false,padWord:" MMMMMMMM",live:i,selector:"textarea"}})})(jQuery);(function(a){var i=window.location.search;a.query={};a.each(i.substring(1,i.length).split("&"),function(d,c){a.query[c.split("=")[0]]=decodeURIComponent(c.split("=")[1])||true})})(jQuery); (function(a){a.fn.defaultText=function(i){var d=a.extend({},a.fn.defaultText.defaults,i||{});return this.each(function(){var c=a(this),b=c.attr(d.defaultAttribute);if(b!==null){c.bind(d.customEvent,function(){c.removeClass(d.defaultClass).val("")}).bind(d.defaultEvent,function(){c.addClass(d.defaultClass).val(b)}).focus(function(){c.val()===b&&c.trigger(d.customEvent)}).blur(function(){c.val()===""&&c.trigger(d.defaultEvent)});if(c.val()===""||c.val()===b)c.trigger(d.defaultEvent)}})};a.extend(a.fn.defaultText, {defaults:{customEvent:"customText",defaultEvent:"defaultText",defaultAttribute:"data-defaultvalue",defaultClass:"default"}})})(jQuery);